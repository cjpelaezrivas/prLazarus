<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es">

<head>
	<meta charset="utf-8" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="generator" content="pandoc" />

	<title>Copiar directorio y contenido [Java] [Windows] - prLázarus</title>

			<meta name='Language' content='es' />
<meta name='Content-Language' content='es' />

<meta name="author" content="Carlos J. Peláez Rivas" />
<meta name="description" content="prLázarus - Blog de programación y diario de desarrollo" />
<meta name="keywords" content="lazarus,surazal,prlazarus,blog,programación,programacion,programming,coding,code,desarrollo,development,java,carlos,jesús,jesus,j,peláez,pelaez,rivas,cjpelaez,cjpelaezrivas,málaga,malaga,uma,españa,spain"/>

<meta property="og:site_name" content="prLázarus" />
<meta property="og:title" content="prLázarus - Blog de programación" />
<meta property="og:description" content="prLázarus - Blog de programación y diario de desarrollo" />
<meta name="twitter:title" content="prLázarus - Blog de programación">
<meta name="twitter:description" content="prLázarus - Blog de programación y diario de desarrollo" />

<link rel="icon" type="image/x-icon" href="images/favicon.ico"/>
<link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico"/>

<link rel="stylesheet" href="lib/bootstrap-4.1.3/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="lib/fontawesome-4.7/css/fontawesome.min.css"/>
<link rel="stylesheet" type="text/css" href="lib/hint-2.5.1/css/hint.base.min.css"/>
<link rel="stylesheet" type="text/css" href="lib/lightbox-2.10/css/lightbox.min.css"/>
<link rel="stylesheet" type="text/css" href="lib/cookieconsent2-3.1.0/css/cookieconsent.min.css"/>

<link rel="stylesheet" type="text/css" href="css/base.css"/>
<link rel="stylesheet" type="text/css" href="css/main.css"/>
<link rel="stylesheet" type="text/css" href="css/entry.css"/>
<link rel="stylesheet" type="text/css" href="css/project.css"/>
<link rel="stylesheet" type="text/css" href="css/toc.css"/>
<link rel="stylesheet" type="text/css" href="css/code.css"/>
<link rel="stylesheet" type="text/css" href="css/print.css" media="print"/>

<script src="lib/jquery-3.3.1/js/jquery.min.js"></script>
<script src="lib/bootstrap-4.1.3/js/bootstrap.bundle.min.js"></script>
<script src="lib/stickytabs-1.2.0/js/stickytabs.js"></script>
<script src="lib/scrolltotop-1.0/js/scrolltotop.js"></script>

<script src="lib/lightbox-2.10/js/lightbox.min.js"></script>
<script>
	lightbox.option({
		'albumLabel': "Imagen %1 de %2",
		'fadeDuration': 250,
		'resizeDuration': 250,
		'wrapAround': true
	})
</script>

<script src="lib/cookieconsent2-3.1.0/js/cookieconsent.min.js"></script>
<script>
	window.addEventListener("load", function(){
		window.cookieconsent.initialise({
			"palette": {
				"popup": {
					"background": "#d4d4d4",
					"text": "#151515"
				},
				"button": {
					"background": "#003379",
					"text": "#ffffff"
				}
			},
			"content": {
				"message": "Este sitio web utiliza cookies propias y de terceros para que tengas la mejor experiencia de usuario posible. Si continuas navegando estás aceptando el uso de las mencionadas cookies y la política de cookies.",
				"dismiss": "Cerrar mensaje",
				"link": "Más información",
				"href": "http://prlazarus.tk/md_cookies_policy.html"
			}
		})
	});
</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-74491738-2"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'UA-74491738-2');
</script>
	</head>

<body>
	<div class="container-fluid main-container">

		<script>
			$(document).ready(function () {
				window.buildTabsets("TOC");
			});
		</script>

					<link rel="stylesheet" type="text/css" href="css/navbar.css"/>

<div id="navbar">
	<div id="zoneA">
		<div class="content">
			<a href="./">
				<div id="logo"></div>
			</a>

			<h1 id="title">
				prLázarus
			</h1>
			<h2 id="subtitle">
				Blog de desarrollo de proyectos Software, tutoriales, consejos y varios.
			</h2>
		</div>
	</div>
	<div id="zoneB">
		<div class="content">
			<div id="menu">
				<a class="menuItem" href="./"><i class="fa fa-home"></i><span class="text"> Página principal</span></a>
				<a class="menuItem" href="./md_projects.html"><i class="fa fa-rocket"></i><span class="text"> Proyectos</span></a>
				<a class="menuItem" href="http://cjpelaezrivas.tk"><i class="fa fa-user-circle"></i><span class="text"> Sobre mí</span></a>
			</div>
		</div>
	</div>
</div>
		
		<div class="fluid-row" id="header">

						<h1 class="title toc-ignore ">Copiar directorio y contenido [Java] [Windows]</h1>
			
			<!--
						-->

			<!--
						-->

							<h4 class="date">
<em>martes, 10 de junio de 2014</em>
</h4>
			
							<b>Etiquetas</b>
				<div id="tag_section">
											<a class="tag" href="md_search.html?tag=Java">Java</a>
											<a class="tag" href="md_search.html?tag=Tutoriales">Tutoriales</a>
											<a class="tag" href="md_search.html?tag=Utilidades">Utilidades</a>
									</div>
			
			<!--
						-->

		</div>

		
		<p>Muy buenas gente,<br> hoy vamos a ver otro pequeño proceso que en este caso en lugar de borrar como el anterior se usará para copiar directorios de forma recursiva. Con esto quiero decir que le damos un directorio origen y un destino, y nuestro método creará el destino si no existe y toda la estructura de directorios que contenga. Además, también realizará una copia de todos y cada uno de los ficheros que vaya encontrando en todo el proceso.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb1-1" title="1"><span class="co">/**</span></a>
<a class="sourceLine" id="cb1-2" title="2"> <span class="co">*</span> Copiar un directorio y todo su contenido de forma recursiva</a>
<a class="sourceLine" id="cb1-3" title="3"> <span class="co">* </span><span class="an">@param origen</span></a>
<a class="sourceLine" id="cb1-4" title="4"> <span class="co">*</span> <span class="an">@param destino</span></a>
<a class="sourceLine" id="cb1-5" title="5"> <span class="co">*/</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="kw">private</span> <span class="dt">void</span> <span class="fu">copiarDirectorio</span>(<span class="bu">String</span> origen, <span class="bu">String</span> destino) {</a>
<a class="sourceLine" id="cb1-7" title="7">    <span class="fu">comprobarCrearDirectorio</span>(destino);</a>
<a class="sourceLine" id="cb1-8" title="8">    <span class="bu">File</span> directorio = <span class="kw">new</span> <span class="bu">File</span>(origen);</a>
<a class="sourceLine" id="cb1-9" title="9">    <span class="bu">File</span> f;</a>
<a class="sourceLine" id="cb1-10" title="10">    <span class="kw">if</span> (directorio.<span class="fu">isDirectory</span>()) {</a>
<a class="sourceLine" id="cb1-11" title="11">        <span class="fu">comprobarCrearDirectorio</span>(destino);</a>
<a class="sourceLine" id="cb1-12" title="12">        <span class="bu">String</span> [] files = directorio.<span class="fu">list</span>();</a>
<a class="sourceLine" id="cb1-13" title="13">        <span class="kw">if</span> (files.<span class="fu">length</span> &gt; <span class="dv">0</span>) {</a>
<a class="sourceLine" id="cb1-14" title="14">            <span class="kw">for</span> (<span class="bu">String</span> archivo : files) {</a>
<a class="sourceLine" id="cb1-15" title="15">                f = <span class="kw">new</span> <span class="bu">File</span> (origen + <span class="bu">File</span>.<span class="fu">separator</span> + archivo);</a>
<a class="sourceLine" id="cb1-16" title="16">                <span class="kw">if</span>(f.<span class="fu">isDirectory</span>()) {</a>
<a class="sourceLine" id="cb1-17" title="17">                    <span class="fu">comprobarCrearDirectorio</span>(destino+<span class="bu">File</span>.<span class="fu">separator</span>+archivo+<span class="bu">File</span>.<span class="fu">separator</span>);</a>
<a class="sourceLine" id="cb1-18" title="18">                    <span class="fu">copiarDirectorio</span>(origen+<span class="bu">File</span>.<span class="fu">separator</span>+archivo+<span class="bu">File</span>.<span class="fu">separator</span>, destino+<span class="bu">File</span>.<span class="fu">separator</span>+archivo+<span class="bu">File</span>.<span class="fu">separator</span>);</a>
<a class="sourceLine" id="cb1-19" title="19">                } <span class="kw">else</span> { <span class="co">//Es un archivo</span></a>
<a class="sourceLine" id="cb1-20" title="20">                    <span class="fu">copiarArchivo</span>(origen+<span class="bu">File</span>.<span class="fu">separator</span>+archivo, destino+<span class="bu">File</span>.<span class="fu">separator</span>+archivo);</a>
<a class="sourceLine" id="cb1-21" title="21">                }</a>
<a class="sourceLine" id="cb1-22" title="22">            }</a>
<a class="sourceLine" id="cb1-23" title="23">        }</a>
<a class="sourceLine" id="cb1-24" title="24">    }</a>
<a class="sourceLine" id="cb1-25" title="25">}</a></code></pre></div>
<p>Como podéis ver, este proceso llama a copiar archivo. Este es el código necesario para copiar dos archivos dadas sus rutas absolutas.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb2-1" title="1"><span class="co">/**</span></a>
<a class="sourceLine" id="cb2-2" title="2"> <span class="co">*</span> Copia el archivo origen en el destino</a>
<a class="sourceLine" id="cb2-3" title="3"> <span class="co">* </span><span class="an">@param sOrigen</span></a>
<a class="sourceLine" id="cb2-4" title="4"> <span class="co">*</span> <span class="an">@param sDestino</span></a>
<a class="sourceLine" id="cb2-5" title="5"> <span class="co">*/</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="kw">private</span> <span class="dt">void</span> <span class="fu">copiarArchivo</span>(<span class="bu">String</span> sOrigen, <span class="bu">String</span> sDestino) {</a>
<a class="sourceLine" id="cb2-7" title="7">    <span class="kw">try</span> {</a>
<a class="sourceLine" id="cb2-8" title="8">        <span class="bu">File</span> origen = <span class="kw">new</span> <span class="bu">File</span>(sOrigen);</a>
<a class="sourceLine" id="cb2-9" title="9">        <span class="bu">File</span> destino = <span class="kw">new</span> <span class="bu">File</span>(sDestino);</a>
<a class="sourceLine" id="cb2-10" title="10">        <span class="bu">InputStream</span> in = <span class="kw">new</span> <span class="bu">FileInputStream</span>(origen);</a>
<a class="sourceLine" id="cb2-11" title="11">        <span class="bu">OutputStream</span> out = <span class="kw">new</span> <span class="bu">FileOutputStream</span>(destino);</a>
<a class="sourceLine" id="cb2-12" title="12"></a>
<a class="sourceLine" id="cb2-13" title="13">        <span class="dt">byte</span>[] buf = <span class="kw">new</span> <span class="dt">byte</span>[<span class="dv">1024</span>];</a>
<a class="sourceLine" id="cb2-14" title="14">        <span class="dt">int</span> len;</a>
<a class="sourceLine" id="cb2-15" title="15"></a>
<a class="sourceLine" id="cb2-16" title="16">        <span class="kw">while</span> ((len = in.<span class="fu">read</span>(buf)) &gt; <span class="dv">0</span>) {</a>
<a class="sourceLine" id="cb2-17" title="17">            out.<span class="fu">write</span>(buf, <span class="dv">0</span>, len);</a>
<a class="sourceLine" id="cb2-18" title="18">        }</a>
<a class="sourceLine" id="cb2-19" title="19"></a>
<a class="sourceLine" id="cb2-20" title="20">        in.<span class="fu">close</span>();</a>
<a class="sourceLine" id="cb2-21" title="21">        out.<span class="fu">close</span>();</a>
<a class="sourceLine" id="cb2-22" title="22"></a>
<a class="sourceLine" id="cb2-23" title="23">    } <span class="kw">catch</span> (<span class="bu">FileNotFoundException</span> e) {</a>
<a class="sourceLine" id="cb2-24" title="24">        e.<span class="fu">printStackTrace</span>();</a>
<a class="sourceLine" id="cb2-25" title="25">    } <span class="kw">catch</span> (<span class="bu">IOException</span> e) {</a>
<a class="sourceLine" id="cb2-26" title="26">        e.<span class="fu">printStackTrace</span>();</a>
<a class="sourceLine" id="cb2-27" title="27">    }</a>
<a class="sourceLine" id="cb2-28" title="28">}</a></code></pre></div>
<p>Y por último, el proceso que podemos usar para comprobar si cierto directorio existe, y en caso contrario crearlo para evitar problemas y excepciones.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb3-1" title="1"><span class="co">/**</span></a>
<a class="sourceLine" id="cb3-2" title="2"> <span class="co">*</span> Comprueba si un directorio existe<span class="co">,</span> y en caso contrario crea toda la ruta necesaria para que exista</a>
<a class="sourceLine" id="cb3-3" title="3"> <span class="co">* </span><span class="an">@param ruta</span></a>
<a class="sourceLine" id="cb3-4" title="4"> <span class="co">*/</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="kw">private</span> <span class="dt">void</span> <span class="fu">comprobarCrearDirectorio</span>(<span class="bu">String</span> ruta) {</a>
<a class="sourceLine" id="cb3-6" title="6">    <span class="bu">File</span> directorio = <span class="kw">new</span> <span class="bu">File</span>(ruta);</a>
<a class="sourceLine" id="cb3-7" title="7">    <span class="kw">if</span> (!directorio.<span class="fu">exists</span>()) {</a>
<a class="sourceLine" id="cb3-8" title="8">        directorio.<span class="fu">mkdirs</span>();</a>
<a class="sourceLine" id="cb3-9" title="9">    }</a>
<a class="sourceLine" id="cb3-10" title="10">}</a></code></pre></div>
<p>Este es un proceso muy poderoso. Tened en cuenta que copiará todo, manteniendo todas las propiedades y características, de modo que si no andáis con cuidado podríais llegar copiar el disco duro entero. Lo que sería muy gracioso y tardaría bastante…</p>
<p>Como en el caso anterior, me gustaría decir que aunque en el título se indica que el algoritmo es para Windows es por el único motivo de que ha sido en el único sistema operativo que lo he probado. Dada la naturaleza de Java, su ejecución no debería tener ningún inconveniente en cualquier otra plataforma.</p>
<p>Espero que os sea útil y hasta otra ocasión.</p>
<p>Saludos,<br> Lázarus Surazal.</p>

					<link rel="stylesheet" type="text/css" href="css/relations.css"/>
<div id="relationsContainer">
<span class="relatedTitle">Entradas relacionadas</span>
<ul>
<li>
<a href="md_2014_05_02.html">Borrar archivos de un directorio [Java] [Windows]</a>
</li>
<li>
<a href="md_2014_08_07.html">Plantilla Java para lectura y escritura de ficheros de texto</a>
</li>
<li>
<a href="md_2015_08_24.html">Hilo (Thread) con eventos [Java]</a>
</li>
<li>
<a href="md_2016_09_22.html">Imprimir por consola nombre y valor de variables [Eclipse] [Java]</a>
</li>
</ul>
</div>
<link rel="stylesheet" type="text/css" href="css/navigation.css"/>
<hr>
<div id="navigationContainer">
<a class="item hint--bottom-left navigateButton right" href="md_2014_08_07.html" data-hint="Plantilla Java para lectura y escritura de ficheros de texto">Siguiente <i class="fa fa-arrow-right"></i></a><a class="item hint--bottom-right navigateButton left" href="md_2014_05_02.html" data-hint="Borrar archivos de un directorio [Java] [Windows]"><i class="fa fa-arrow-left"></i> Anterior</a><a class="navigateButton center" href="./"><i class="fa fa-home"></i> Volver a la página principal</a>
</div>
		
					<link rel="stylesheet" type="text/css" href="css/info.css"/>

<div id="infoContainer">
	<div id="infoProfile" class="info_block">
		<div class="title">
			<b>Perfil</b>
		</div>
		<div class="content">
			<div class="part photo">
				<img src="images/logo_b.png" width="90px" alt="prLázarus logo info" />
			</div>
			<div class="part description">
				<b>Carlos J. Peláez Rivas (Lázarus Surazal)</b> <br>
				Graduado y Máster en Ingeniería Informática por la Universidad de Málaga. Actualmente trabajando como desarrollador de aplicaciones en Java usando Vaadin.<br>
				Apasionado de los videojuegos, la música y alguna que otra tecnología, siempre buscando cosas nuevas que aprender y hacer. <br>
				<a href="http://cjpelaezrivas.tk">Más sobre mi...</a>
			</div>
		</div>
	</div>
	<div id="infoContact" class="info_block">
		<div class="title">
			<b>Contacto</b>
		</div>
		<div class="content links">
			<div class="item hint--bottom-right" data-hint="Perfil personal">
				<a href="http://cjpelaezrivas.tk" style="font-size: 38px; line-height: 38px;"><i class="fa fa-user-circle"></i></a>
			</div>
			<div class="item hint--bottom-right" data-hint="prLázarus - RSS">
				<a href="./feed.xml"><i class="fa fa-rss-square"></i></a>
			</div>
			<div class="item hint--bottom-right" data-hint="Enviar correo electrónico">
				<a href="mailto:prlazarus.info@gmail.com"><i class="fa fa-envelope-square"></i></a>
			</div>
			<div class="item hint--bottom-right" data-hint="Perfil de GitHub">
				<a href="https://github.com/cjpelaezrivas"><i class="fa fa-github-square"></i></a>
			</div>
			<div class="item hint--bottom-right" data-hint="Perfil de LinkedIn">
				<a href="https://www.linkedin.com/in/cjpelaezrivas"><i class="fa fa-linkedin-square"></i></a>
			</div>
		</div>
	</div>

	<div id="infoSuscribe" class="info_block">
		<div class="title">
			<b>Notificaciones</b>
		</div>
		<div class="content">
			<form  method="post" action="https://prlazarus.us20.list-manage.com/subscribe/post?u=5dc6163ee27b4b8f0090978e1&amp;id=6b3b278c76" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
		    	<div>
					<input type="email" name="EMAIL" class="field" id="mce-EMAIL" placeholder="Dirección de email" value="">

					<!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
			    	<div style="position: absolute; left: -5000px;" aria-hidden="true">
			    		<input type="text" name="b_5dc6163ee27b4b8f0090978e1_6b3b278c76" tabindex="-1" value="">
			    	</div>

			    	<div class="item hint--bottom hint--large" data-hint="Recibe notificaciones por correo electrónico cada vez que se publique una nueva entrada." style="width:100%;">
						<button type="submit" id="mc-embedded-subscribe" form="mc-embedded-subscribe-form">
							<i class="fa fa-envelope"></i> Suscribirse
						</button>
					</div>
		    	</div>
			</form>
		</div>
	</div>
</div>
					<div id="commentsContainer" style="float:left; width:100%;">
	<script src="https://utteranc.es/client.js"
        repo="cjpelaezrivas/prlazarus"
        issue-term="title"
        label="comments"
        theme="github-light"
        crossorigin="anonymous"
        async>
	</script>
	<noscript>
		<div class="block warning icon fa-exclamation" style="margin-bottom:20px;">
			Por favor, activa JavaScript para ver los comentarios.
		</div>
	</noscript>
</div>
					<link rel="stylesheet" type="text/css" href="css/footer.css"/>

<div id="footer_message">
	¿Has encontrado algún error? <a href="mailto:prlazarus.info@gmail.com">Envía un correo electrónico</a> o <a href="">abre un nuevo <i>issue</i></a> para corregirlo. Gracias.
</div>
<div id="footer">
	<div class="content">
		<div id="logo_footer">
			<a href="http://prlazarus.tk"><img src="images/logo_c.png" alt="prLázarus logo footer" style="margin-top:10px;"/></a>
			<!-- <span class="text" style="display:block; text-align:center; margin-top:-4px;">© 2012 - 2018</span> -->
		</div>
		<div id="right_column" class="text">
			Desarrollado en <a href="https://es.wikipedia.org/wiki/Espa%C3%B1a"><img src="images/spain.png" style="margin: -2px 2px 0 2px;" alt="Spain flag"/></a> con <i class="fa fa-heart" style="color:#cc0000"></i> por <i><a href="http://prlazarus.tk">prLázarus</a></i><br>
			<i class="fa fa-plug"></i> Con la tecnología de <i><a href="http://rmarkdown.rstudio.com/index.html">R Markdown</a></i> y <i><a href="https://pages.github.com/">GitHub Pages</a></i><br>
			<i><a href="./feed.xml">RSS</a></i>
			&nbsp;|&nbsp;
			<i><a href="md_cookies_policy.html">Política de cookies</a></i>
			&nbsp;|&nbsp;
			<i><a href="md_disclaimer.html">Limitación de responsabilidad</a></i><br>
			<a href="mailto:prlazarus.info@gmail.com">prlazarus.info@gmail.com</a>
		</div>
	</div>
</div>
					<link rel="stylesheet" type="text/css" href="css/progressBar.css"/>

<div id="progressBarContainer">
	<div class="progressBar">
	</div>
</div>

<script src="js/progressBar.js"></script>
		
	</div>
</body>
</html>
